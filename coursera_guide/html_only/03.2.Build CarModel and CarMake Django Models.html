<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <meta name="renderer" content="webkit" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <meta name="keywords" content="Editor.md,editor,Markdown Editor,Markdown" />
    <meta name="description" content="Skills Network Author IDE" />
    <title>Skills Network Editor</title>
    <link rel="stylesheet" href="editormd/examples/css/style.css?version=2.0.9" />
    <link rel="stylesheet" href="editormd/css/editormd.css?version=2.0.9" />
    <link rel="stylesheet" href="public/css/custom.css?version=2.0.9" />
    <link rel="shortcut icon" href="public/images/SN_favicon.png" type="image/x-icon" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
        integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <script src="public/js/comms.js?version=2.0.9"></script>
    <script src="//unpkg.com/alpinejs"></script>
</head>

<body>
    <div id="layout">
    <div id="test-editormd">
        <textarea style="display:none;">::page{title&#x3D;&quot;Build CarModel and CarMake Django Models&quot;}

&lt;img src&#x3D;&quot;https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-CD0321EN-SkillsNetwork/images/IDSN-logo.png&quot; width&#x3D;&quot;200&quot; alt&#x3D;&quot;cognitiveclass.ai logo&quot;&gt;

##

**Estimated time needed:** 90 minutes

A dealership typically manages cars from one or more makes, 
and customers should be allowed to review the cars they purchased from a dealer. 

In this lab, you will create the car model and car make related models in the Django app.

- A car model includes basic information such as its make, year, type, and dealer id. 
- A car make  includes basic information such as name and description.

::page{title&#x3D;&quot;Environment setup&quot;}

If your Theia workspace has been reset and you want to continue from what you have done previously, 
&#x60;git clone&#x60; or pull from your created GitHub repository. 

- Set up the Python runtime if Theia workspace has been reset.

&#x60;&#x60;&#x60;
python3 -m pip install -U -r requirements.txt
&#x60;&#x60;&#x60;

Note: You may need to perform models migrations for a new Theia environment.

::page{title&#x3D;&quot;To Build Car Model and Car Make models&quot;}

You will need to create two new models in &#x60;djangoapp/models.py&#x60;:

- A &#x60;CarMake&#x60; model to save some data about a car make.
- A &#x60;CarModel&#x60; model to save some data about a car model.

You could find some hints in the code comments with the tag &#x60;&lt;HINT&gt;&#x60;.

 

 - Create a car make Django model &#x60;class CarMake(models.Model):&#x60;:
    - Name
    - Description
    - Any other fields you would like to include in a car make
    - A &#x60;__str__&#x60; method to print a car make object
 
- Create a car model Django model &#x60;class CarModel(models.Model)&#x60;:
    - Many-To-One relationship to &#x60;CarMake&#x60; model (One car make has many car models, using a ForeignKey field)
    - Dealer Id (IntegerField) refers to a dealer created in Cloudant database
    - Name
    - Type (CharField with a choices argument to provide limited choices such as Sedan, SUV, and WAGON)
    - Year (DateField)
    - Any other fields you would like to include in a car model
    - A &#x60;__str__&#x60; method to print the car model object

- Run migrations for the models.

&#x60;&#x60;&#x60;python3 manage.py makemigrations onlinecourse&#x60;&#x60;&#x60;

and

&#x60;&#x60;&#x60;python3 manage.py migrate&#x60;&#x60;&#x60;

Note: If you see any errors related to model migrations, you could choose to delete the existing
database &#x60;db.sqlite3&#x60; and re-run above migration again.

Refer to the previous Django ORM lab for more details:

&lt;a href&#x3D;&quot;https://cocl.us/8Z1B5&quot; target&#x3D;&quot;_blank&quot;&gt;CRUD on Django Model Objects&lt;/a&gt;

::page{title&#x3D;&quot;To register CarMake and CarModel models with the admin site&quot;}

- First, you need to have a superuser for the admin site, if not created before.
 

Please use &#x60;root&#x60; as user name and &#x60;root&#x60; as password for your reviewer to login your app.

### Take a screenshot for peer-review: 

After you logged-in the admin site, please take a screenshot and name it as &#x60;admin_login.jpg&#x60; or &#x60;admin_login.png&#x60; for peer-review.

In addition, you may want to try log-out the admin user and you will be redirected to the admin login page again, 
and take a screenshot called &#x60;admin_logout.jpg&#x60; or &#x60;admin_logout.png&#x60;

## Register &#x60;CarMake&#x60; and &#x60;CarModel&#x60; models

- You need to register the &#x60;CarMake&#x60; and &#x60;CarModel&#x60; in the admin site so you can conveniently 
manage their content (i.e., perform CRUD operations).

- You will also need to create &#x60;CarModelInline&#x60; so that you could manage &#x60;CarModel&#x60; and &#x60;CarMake&#x60;
together on one page in the Admin site.
 

Note that for the dealer id field, you need to enter the integer dealer id you created in IBM Cloudant database. 
So that the car model can be associated with a dealer in the Cloudant database.

- After you register the new models, you can create a new car make with several cars for testing.

### Take a screenshot for peer-review: 

After you have filled the fields for a new car make on the admin page, please take a screenshot and name it 
as &#x60;create_carmake.jpg&#x60; or &#x60;create_carmake.png&#x60; for peer-review.

Also, after created the new car make, you should go back to the car make list and verify it was created successfully.
Now take a screenshot of the current car make list with the newly added car make and name it &#x60;updated_carmake_list.jpg&#x60; or &#x60;updated_carmake_list.png&#x60;

Refer to the previous Admin site lab for more details:

&lt;a href&#x3D;&quot;https://cocl.us/TzAvw&quot; target&#x3D;&quot;_blank&quot;&gt;Django Admin Site&lt;/a&gt;

::page{title&#x3D;&quot;Commit your updated project to GitHub&quot;}

Commit all updates to the GitHub repository you created so that you can save your work.

If you need to refresh your memory on how to commit and push your code to GitHub in Theia lab environment, please refer to this lab [Working with git in the Theia lab environment](https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBMDeveloperSkillsNetwork-CD0101EN-SkillsNetwork/labs/GitHubLabs/Github_commit.md.html)

::page{title&#x3D;&quot;Summary&quot;}

In this lab, you have created the car model and car make related models in your Django app.

## Author(s)

&lt;h4&gt; Yan Luo &lt;h4/&gt;

### Other Contributor(s) 

Upkar Lidder

Priya

## Changelog

| Date | Version | Changed by | Change Description |
|------|--------|--------|---------|
| 2021-02-15 | 1.0 | Yan Luo | Created new instructions for Capstone project |
| 2022-09-20 | 1.1 | K Sundararajan | Updated pip (packages installation) command |

## &lt;h3 align&#x3D;&quot;center&quot;&gt; Â© IBM Corporation 2021. All rights reserved. &lt;h3/&gt;

</textarea>
    </div>
</div>

<script src="editormd/examples/js/jquery.min.js"></script>
<script src="editormd/editormd.js?version=2.0.9"></script>

<script src="editormd/languages/en.js"></script>

<script src="public/js/common.js?version=2.0.9"></script>
<script src="public/js/render.js?version=2.0.9"></script>

<script type="text/javascript">

    $(function () {
        let token = findGetParameter("token");

        let LABS_BASE_URL = 'https://labs.cognitiveclass.ai';
        let asset_library_prefix_url = 'https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-CD0321EN-SkillsNetwork';
        let tool_type = "theia";
        let projectId = "";
        let filename = `labs/module_3_backend_services/2-instructional-labs-theia-django-models.md`;
        try {
            let projectIdStored = false
            let project = JSON.parse(localStorage.getItem("sn-project"))
            if (project != null) {
                if (projectId in project) {
                    projectIdStored = true
                    if (!(filename in project[projectId])) {
                        project[projectId][filename] = {}
                    }
                }
            }
            if (!projectIdStored) {
                project = {}
                project[projectId] = {}
                project[projectId][filename] = {}
            }
            window.localStorage.setItem("sn-project", JSON.stringify(project))
        }
        catch (e) {
            console.log(e)
        }

        var authorEditor = editormd("test-editormd", "2.0.9", {

            tool_type,
            projectId,
            filename,

            width: "100%",
            //height: "100%",
            autoHeight: true,

            // mode: 'markdown',

            theme: "dark",
            previewTheme: tool_type == "instructional-lab" ? "light" : "dark",
            editorTheme: "pastel-on-dark",

            readOnly: true,

            pluginPath: 'plugins/',


            syncScrolling: false,

            htmlDecode: 'img',

            path: 'editormd/lib/',
            watch: false,

            // markdown,
            toolbar: false,

            atLink: false,
            toc: true,
            tocm: true,
            tocDropdown: false,
            tocTitle: "Table of Contents For your lab!",

            tex: true,
            flowChart: true,
            sequenceDiagram: true,
            codeFold: true, // Doesn't do anything?
            taskList: true,
            emoji: true,

            saveMarkdownToTextarea: true,

            onresize: function () {
                $("html,body").css("overflow", "hidden");

                this.preview.css({
                    width: $(window).width(),
                    height: $(window).height()
                })

                adjustProgressBarWidth()
            },
            fixCodeBlocks: function () {
                adjustCodeBlocks(this);
            },
            onload: function () {
                $("[type=\"file\"]").bind("change", function () {
                    alert($(this).val());
                    authorEditor.cm.replaceSelection($(this).val());
                    console.log($(this).val(), authorEditor);
                });

                this.fullscreen();
                this.previewing();

                setPreviewWatchToolbar(this);

                if (tool_type != "instructional-lab") {
                    fixCustomPlugins(this);
                }
                setAssetLibraryPrefixUrl(asset_library_prefix_url);
                //comms with UI
                setParentUrl(LABS_BASE_URL);
                establishCommsWithUI(this);
                //let the UI know that the author-ide has loaded
                requestToUI({ type: "frame_loaded" });
            }
        });
    });
</script>
</body>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous">
    </script>

</html>